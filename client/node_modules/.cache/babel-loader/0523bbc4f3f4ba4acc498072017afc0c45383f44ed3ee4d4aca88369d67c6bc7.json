{"ast":null,"code":"import axios from'axios';import setAuthToken from'../utils/setAuthToken';import jwt_decode from'jwt-decode';import{GET_ERRORS,SET_CURRENT_USER}from'./types';// registerUser Action Creator\n// We want to wait for the response from the server and then dispatch the action\n// Redux thunk allows us to use dispatch inside an action creator\nexport var registerUser=function registerUser(userData,history){return function(dispatch){axios.post('https://devarena-byn0.onrender.com/api/users/register',userData).then(function(){return history.push('/login');}).catch(function(err){return dispatch({type:GET_ERRORS,payload:err.response.data});});};};// Login - Get User Token\nexport var loginUser=function loginUser(userData){return function(dispatch){axios.post('https://devarena-byn0.onrender.com/api/users/login',userData).then(function(res){// Save to localStorage\nvar token=res.data.token;// Set token to localStorage\nlocalStorage.setItem('jwtToken',token);// Set token to Auth header\nsetAuthToken(token);// Decode token to get user data\nvar decoded=jwt_decode(token);// Set current user\ndispatch(setCurrentUser(decoded));}).catch(function(err){dispatch({type:GET_ERRORS,payload:err.response.data});});};};// Set logged in user\nexport var setCurrentUser=function setCurrentUser(decoded){return{type:SET_CURRENT_USER,payload:decoded};};// Log user out\nexport var logoutUser=function logoutUser(){return function(dispatch){// Remove token from localStorage\nlocalStorage.removeItem('jwtToken');// Remove auth header for future requests\nsetAuthToken(false);// Set current user to {} which will set isAuthenticated to false\ndispatch(setCurrentUser({}));};};","map":{"version":3,"names":["axios","setAuthToken","jwt_decode","GET_ERRORS","SET_CURRENT_USER","registerUser","userData","history","dispatch","post","then","push","catch","err","type","payload","response","data","loginUser","res","token","localStorage","setItem","decoded","setCurrentUser","logoutUser","removeItem"],"sources":["/Users/sachin/DevArena/client/src/actions/authActions.js"],"sourcesContent":["import axios from 'axios';\nimport setAuthToken from '../utils/setAuthToken';\nimport jwt_decode from 'jwt-decode';\nimport { GET_ERRORS, SET_CURRENT_USER } from './types';\n\n// registerUser Action Creator\n// We want to wait for the response from the server and then dispatch the action\n// Redux thunk allows us to use dispatch inside an action creator\nexport const registerUser = (userData, history) => dispatch => {\n    axios\n        .post('https://devarena-byn0.onrender.com/api/users/register', userData)\n        .then(() => history.push('/login'))\n        .catch(err =>\n            dispatch({\n                type: GET_ERRORS,\n                payload: err.response.data\n            })\n        );\n};\n\n// Login - Get User Token\nexport const loginUser = userData => dispatch => {\n    axios\n        .post('https://devarena-byn0.onrender.com/api/users/login', userData)\n        .then(res => {\n            // Save to localStorage\n            const { token } = res.data;\n            // Set token to localStorage\n            localStorage.setItem('jwtToken', token);\n            // Set token to Auth header\n            setAuthToken(token);\n            // Decode token to get user data\n            const decoded = jwt_decode(token);\n            // Set current user\n            dispatch(setCurrentUser(decoded));\n        })\n        .catch(err => {\n            dispatch({\n                type: GET_ERRORS,\n                payload: err.response.data\n            });\n        });\n};\n\n// Set logged in user\nexport const setCurrentUser = decoded => {\n    return {\n        type: SET_CURRENT_USER,\n        payload: decoded\n    };\n};\n\n// Log user out\nexport const logoutUser = () => dispatch => {\n    // Remove token from localStorage\n    localStorage.removeItem('jwtToken');\n    // Remove auth header for future requests\n    setAuthToken(false);\n    // Set current user to {} which will set isAuthenticated to false\n    dispatch(setCurrentUser({}));\n};\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,YAAY,KAAM,uBAAuB,CAChD,MAAO,CAAAC,UAAU,KAAM,YAAY,CACnC,OAASC,UAAU,CAAEC,gBAAgB,KAAQ,SAAS,CAEtD;AACA;AACA;AACA,MAAO,IAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,QAAQ,CAAEC,OAAO,QAAK,UAAAC,QAAQ,CAAI,CAC3DR,KAAK,CACAS,IAAI,CAAC,uDAAuD,CAAEH,QAAQ,CAAC,CACvEI,IAAI,CAAC,iBAAM,CAAAH,OAAO,CAACI,IAAI,CAAC,QAAQ,CAAC,GAAC,CAClCC,KAAK,CAAC,SAAAC,GAAG,QACN,CAAAL,QAAQ,CAAC,CACLM,IAAI,CAAEX,UAAU,CAChBY,OAAO,CAAEF,GAAG,CAACG,QAAQ,CAACC,IAC1B,CAAC,CAAC,EACN,CAAC,CACT,CAAC,GAED;AACA,MAAO,IAAM,CAAAC,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAGZ,QAAQ,QAAI,UAAAE,QAAQ,CAAI,CAC7CR,KAAK,CACAS,IAAI,CAAC,oDAAoD,CAAEH,QAAQ,CAAC,CACpEI,IAAI,CAAC,SAAAS,GAAG,CAAI,CACT;AACA,GAAQ,CAAAC,KAAK,CAAKD,GAAG,CAACF,IAAI,CAAlBG,KAAK,CACb;AACAC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAEF,KAAK,CAAC,CACvC;AACAnB,YAAY,CAACmB,KAAK,CAAC,CACnB;AACA,GAAM,CAAAG,OAAO,CAAGrB,UAAU,CAACkB,KAAK,CAAC,CACjC;AACAZ,QAAQ,CAACgB,cAAc,CAACD,OAAO,CAAC,CAAC,CACrC,CAAC,CAAC,CACDX,KAAK,CAAC,SAAAC,GAAG,CAAI,CACVL,QAAQ,CAAC,CACLM,IAAI,CAAEX,UAAU,CAChBY,OAAO,CAAEF,GAAG,CAACG,QAAQ,CAACC,IAC1B,CAAC,CAAC,CACN,CAAC,CAAC,CACV,CAAC,GAED;AACA,MAAO,IAAM,CAAAO,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAGD,OAAO,CAAI,CACrC,MAAO,CACHT,IAAI,CAAEV,gBAAgB,CACtBW,OAAO,CAAEQ,OACb,CAAC,CACL,CAAC,CAED;AACA,MAAO,IAAM,CAAAE,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAA,QAAS,UAAAjB,QAAQ,CAAI,CACxC;AACAa,YAAY,CAACK,UAAU,CAAC,UAAU,CAAC,CACnC;AACAzB,YAAY,CAAC,KAAK,CAAC,CACnB;AACAO,QAAQ,CAACgB,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAChC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}